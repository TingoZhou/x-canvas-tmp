<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/EaselJS_16x16.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
	<title>xc v0.1.0 API Documentation : ..\src\lib\createjs\easeljs\utils\SpriteSheetUtils.js</title>  
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><a href="http:&#x2F;&#x2F;www.createjs.com&#x2F;#!&#x2F;EaselJS"><img src="http:&#x2F;&#x2F;createjs.com&#x2F;resources&#x2F;SuiteIcons&#x2F;EaselJS&#x2F;docs-icon-EaselJS.png" title="xc"></a></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Documentation for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/AlphaMapFilter.html">AlphaMapFilter</a></li>
            
                <li><a href="..&#x2F;classes/AlphaMaskFilter.html">AlphaMaskFilter</a></li>
            
                <li><a href="..&#x2F;classes/Bitmap.html">Bitmap</a></li>
            
                <li><a href="..&#x2F;classes/BitmapAnimation.html">BitmapAnimation</a></li>
            
                <li><a href="..&#x2F;classes/BoxBlurFilter.html">BoxBlurFilter</a></li>
            
                <li><a href="..&#x2F;classes/ColorFilter.html">ColorFilter</a></li>
            
                <li><a href="..&#x2F;classes/ColorMatrix.html">ColorMatrix</a></li>
            
                <li><a href="..&#x2F;classes/ColorMatrixFilter.html">ColorMatrixFilter</a></li>
            
                <li><a href="..&#x2F;classes/Command.html">Command</a></li>
            
                <li><a href="..&#x2F;classes/Container.html">Container</a></li>
            
                <li><a href="..&#x2F;classes/CSSPlugin.html">CSSPlugin</a></li>
            
                <li><a href="..&#x2F;classes/DisplayObject.html">DisplayObject</a></li>
            
                <li><a href="..&#x2F;classes/Ease.html">Ease</a></li>
            
                <li><a href="..&#x2F;classes/EventDispatcher.html">EventDispatcher</a></li>
            
                <li><a href="..&#x2F;classes/Filter.html">Filter</a></li>
            
                <li><a href="..&#x2F;classes/Graphics.html">Graphics</a></li>
            
                <li><a href="..&#x2F;classes/HTMLAudioLoader.html">HTMLAudioLoader</a></li>
            
                <li><a href="..&#x2F;classes/HTMLAudioPlugin.html">HTMLAudioPlugin</a></li>
            
                <li><a href="..&#x2F;classes/Log.html">Log</a></li>
            
                <li><a href="..&#x2F;classes/Matrix2D.html">Matrix2D</a></li>
            
                <li><a href="..&#x2F;classes/MotionGuidePlugin.html">MotionGuidePlugin</a></li>
            
                <li><a href="..&#x2F;classes/MouseEvent.html">MouseEvent</a></li>
            
                <li><a href="..&#x2F;classes/MovieClip.html">MovieClip</a></li>
            
                <li><a href="..&#x2F;classes/MovieClipPlugin.html">MovieClipPlugin</a></li>
            
                <li><a href="..&#x2F;classes/Point.html">Point</a></li>
            
                <li><a href="..&#x2F;classes/Rectangle.html">Rectangle</a></li>
            
                <li><a href="..&#x2F;classes/Shadow.html">Shadow</a></li>
            
                <li><a href="..&#x2F;classes/Shape.html">Shape</a></li>
            
                <li><a href="..&#x2F;classes/Sound.html">Sound</a></li>
            
                <li><a href="..&#x2F;classes/SoundChannel.html">SoundChannel</a></li>
            
                <li><a href="..&#x2F;classes/SoundInstance.html">SoundInstance</a></li>
            
                <li><a href="..&#x2F;classes/SpriteSheet.html">SpriteSheet</a></li>
            
                <li><a href="..&#x2F;classes/SpriteSheetBuilder.html">SpriteSheetBuilder</a></li>
            
                <li><a href="..&#x2F;classes/SpriteSheetUtils.html">SpriteSheetUtils</a></li>
            
                <li><a href="..&#x2F;classes/Stage.html">Stage</a></li>
            
                <li><a href="..&#x2F;classes/TagPool.html">TagPool</a></li>
            
                <li><a href="..&#x2F;classes/Text.html">Text</a></li>
            
                <li><a href="..&#x2F;classes/Ticker.html">Ticker</a></li>
            
                <li><a href="..&#x2F;classes/Timeline.html">Timeline</a></li>
            
                <li><a href="..&#x2F;classes/Touch.html">Touch</a></li>
            
                <li><a href="..&#x2F;classes/Tween.html">Tween</a></li>
            
                <li><a href="..&#x2F;classes/UID.html">UID</a></li>
            
                <li><a href="..&#x2F;classes/WebAudioLoader.html">WebAudioLoader</a></li>
            
                <li><a href="..&#x2F;classes/WebAudioPlugin.html">WebAudioPlugin</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/xc.html">xc</a></li>
            
                <li><a href="..&#x2F;modules/xc.core.html">xc.core</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.html">xc.createjs</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.easeljs.html">xc.createjs.easeljs</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.soundjs.html">xc.createjs.soundjs</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.tweenjs.html">xc.createjs.tweenjs</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
            <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <script>
	var name = ..\src\lib\createjs\easeljs\utils\SpriteSheetUtils.js      
</script>
<h1 class="file-heading">File:..\src\lib\createjs\easeljs\utils\SpriteSheetUtils.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
xc.module.define(&quot;xc.createjs.SpriteSheetUtils&quot;, function(exports) {

  &#x2F;**
   * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink &quot;SpriteSheet&quot;}}{{&#x2F;crossLink}}s.
   * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For
   * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across
   * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.
   *
   * @class SpriteSheetUtils
   * @static
   *&#x2F;
  var SpriteSheetUtils = function() {
    throw &quot;SpriteSheetUtils cannot be instantiated&quot;;
  };

  &#x2F;**
   * @property _workingCanvas
   * @static
   * @type HTMLCanvasElement | Object
   * @protected
   *&#x2F;
  SpriteSheetUtils._workingCanvas = document.createElement(&quot;canvas&quot;);

  &#x2F;**
   * @property _workingContext
   * @static
   * @type CanvasRenderingContext2D
   * @protected
   *&#x2F;
  SpriteSheetUtils._workingContext = SpriteSheetUtils._workingCanvas.getContext(&quot;2d&quot;);

  &#x2F;**
   * &lt;b&gt;This is an experimental method, and may be buggy. Please report issues.&lt;&#x2F;b&gt;
   *
   * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,
   * and adding appropriate animation &amp; frame data. The flipped animations will have a suffix added to their names
   * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.
   *
   * &lt;h4&gt;Example&lt;&#x2F;h4&gt;
   *     SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);
   *
   * The above would add frames that are flipped horizontally AND frames that are flipped vertically.
   *
   * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some
   * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,
   * which is why addFlippedFrames is available.
   *
   * @method addFlippedFrames
   * @static
   * @param {SpriteSheet} spriteSheet
   * @param {Boolean} horizontal If true, horizontally flipped frames will be added.
   * @param {Boolean} vertical If true, vertically flipped frames will be added.
   * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.
   *&#x2F;
  SpriteSheetUtils.addFlippedFrames = function(spriteSheet, horizontal, vertical, both) {
    if (!horizontal &amp;&amp; !vertical &amp;&amp; !both) { return; }
    var count = 0;
    if (horizontal) { SpriteSheetUtils._flip(spriteSheet, ++count, true, false); }
    if (vertical) { SpriteSheetUtils._flip(spriteSheet, ++count, false, true); }
    if (both) { SpriteSheetUtils._flip(spriteSheet, ++count, true, true); }
  }

  &#x2F;**
   * Returns a single frame of the specified sprite sheet as a new PNG image. Note that in almost all cases it is better
   * to display a single frame using a paused instance of BitmapAnimation, than it is to slice out a frame using this
   * method and display it with a Bitmap instance.
   *
   * @method extractFrame
   * @static
   * @param {Image} spriteSheet The SpriteSheet instance to extract a frame from.
   * @param {Number} frame The frame number or animation name to extract. If an animation
   *  name is specified, only the first frame of the animation will be extracted.
   * @return {Image} a single frame of the specified sprite sheet as a new PNG image.
   *&#x2F;
  SpriteSheetUtils.extractFrame = function(spriteSheet, frame) {
    if (isNaN(frame)) {
      frame = spriteSheet.getAnimation(frame).frames[0];
    }
    var data = spriteSheet.getFrame(frame);
    if (!data) { return null; }
    var r = data.rect;
    var canvas = SpriteSheetUtils._workingCanvas;
    canvas.width = r.width;
    canvas.height = r.height;
    SpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);
    var img = new Image();
    img.src = canvas.toDataURL(&quot;image&#x2F;png&quot;);
    return img;
  };

  &#x2F;**
   * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed
   * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of
   * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings
   * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).
   *
   * @method mergeAlpha
   * @static
   * @param {Image} rgbImage The image (or canvas) containing the RGB channels to use.
   * @param {Image} alphaImage The image (or canvas) containing the alpha channel to use.
   * @param {canvas} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.
   * @return {canvas} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.
   *&#x2F;
  SpriteSheetUtils.mergeAlpha = function(rgbImage, alphaImage, canvas) {
    if (!canvas) { canvas = document.createElement(&quot;canvas&quot;); }
    canvas.width = Math.max(alphaImage.width, rgbImage.width);
    canvas.height = Math.max(alphaImage.height, rgbImage.height);
    var ctx = canvas.getContext(&quot;2d&quot;);
    ctx.save();
    ctx.drawImage(rgbImage, 0, 0);
    ctx.globalCompositeOperation = &quot;destination-in&quot;;
    ctx.drawImage(alphaImage, 0, 0);
    ctx.restore();
    return canvas;
  };

  SpriteSheetUtils._flip = function(spriteSheet, count, h, v) {
    var imgs = spriteSheet._images;
    var canvas = SpriteSheetUtils._workingCanvas;
    var ctx = SpriteSheetUtils._workingContext;
    var il = imgs.length &#x2F; count;
    for (var i = 0; i &lt; il; i++) {
      var src = imgs[i];
      src.__tmp = i; &#x2F;&#x2F; a bit hacky, but faster than doing indexOf below.
      canvas.width = 0; &#x2F;&#x2F; make sure it clears.
      canvas.width = src.width;
      canvas.height = src.height;
      ctx.setTransform(h ? -1 : 1, 0, 0, v ? -1 : 1, h ? src.width : 0, v ? src.height : 0);
      ctx.drawImage(src, 0, 0);
      var img = new Image();
      img.src = canvas.toDataURL(&quot;image&#x2F;png&quot;);
      &#x2F;&#x2F; work around a strange bug in Safari:
      img.width = src.width;
      img.height = src.height;
      imgs.push(img);
    }
    var frames = spriteSheet._frames;
    var fl = frames.length &#x2F; count;
    for (i = 0; i &lt; fl; i++) {
      src = frames[i];
      var rect = src.rect.clone();
      img = imgs[src.image.__tmp + il * count];
      var frame = {image: img, rect: rect, regX: src.regX, regY: src.regY};
      if (h) {
        rect.x = img.width - rect.x - rect.width; &#x2F;&#x2F; update rect
        frame.regX = rect.width - src.regX; &#x2F;&#x2F; update registration point
      }
      if (v) {
        rect.y = img.height - rect.y - rect.height;  &#x2F;&#x2F; update rect
        frame.regY = rect.height - src.regY; &#x2F;&#x2F; update registration point
      }
      frames.push(frame);
    }
    var sfx = &quot;_&quot; + (h ? &quot;h&quot; : &quot;&quot;) + (v ? &quot;v&quot; : &quot;&quot;);
    var names = spriteSheet._animations;
    var data = spriteSheet._data;
    var al = names.length &#x2F; count;
    for (i = 0; i &lt; al; i++) {
      var name = names[i];
      src = data[name];
      var anim = {name: name + sfx, frequency: src.frequency, next: src.next, frames: []};
      if (src.next) { anim.next += sfx; }
      frames = src.frames;
      for (var j = 0, l = frames.length; j &lt; l; j++) {
        anim.frames.push(frames[j] + fl * count);
      }
      data[anim.name] = anim;
      names.push(anim.name);
    }
  }

  return SpriteSheetUtils;

});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>