<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/EaselJS_16x16.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
	<title>xc v0.1.0 API Documentation : ..\src\lib\createjs\tweenjs\MotionGuidePlugin.js</title>  
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><a href="http:&#x2F;&#x2F;www.createjs.com&#x2F;#!&#x2F;EaselJS"><img src="http:&#x2F;&#x2F;createjs.com&#x2F;resources&#x2F;SuiteIcons&#x2F;EaselJS&#x2F;docs-icon-EaselJS.png" title="xc"></a></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Documentation for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/AlphaMapFilter.html">AlphaMapFilter</a></li>
            
                <li><a href="..&#x2F;classes/AlphaMaskFilter.html">AlphaMaskFilter</a></li>
            
                <li><a href="..&#x2F;classes/Bitmap.html">Bitmap</a></li>
            
                <li><a href="..&#x2F;classes/BitmapAnimation.html">BitmapAnimation</a></li>
            
                <li><a href="..&#x2F;classes/BoxBlurFilter.html">BoxBlurFilter</a></li>
            
                <li><a href="..&#x2F;classes/ColorFilter.html">ColorFilter</a></li>
            
                <li><a href="..&#x2F;classes/ColorMatrix.html">ColorMatrix</a></li>
            
                <li><a href="..&#x2F;classes/ColorMatrixFilter.html">ColorMatrixFilter</a></li>
            
                <li><a href="..&#x2F;classes/Command.html">Command</a></li>
            
                <li><a href="..&#x2F;classes/Container.html">Container</a></li>
            
                <li><a href="..&#x2F;classes/CSSPlugin.html">CSSPlugin</a></li>
            
                <li><a href="..&#x2F;classes/DisplayObject.html">DisplayObject</a></li>
            
                <li><a href="..&#x2F;classes/Ease.html">Ease</a></li>
            
                <li><a href="..&#x2F;classes/EventDispatcher.html">EventDispatcher</a></li>
            
                <li><a href="..&#x2F;classes/Filter.html">Filter</a></li>
            
                <li><a href="..&#x2F;classes/Graphics.html">Graphics</a></li>
            
                <li><a href="..&#x2F;classes/HTMLAudioLoader.html">HTMLAudioLoader</a></li>
            
                <li><a href="..&#x2F;classes/HTMLAudioPlugin.html">HTMLAudioPlugin</a></li>
            
                <li><a href="..&#x2F;classes/Log.html">Log</a></li>
            
                <li><a href="..&#x2F;classes/Matrix2D.html">Matrix2D</a></li>
            
                <li><a href="..&#x2F;classes/MotionGuidePlugin.html">MotionGuidePlugin</a></li>
            
                <li><a href="..&#x2F;classes/MouseEvent.html">MouseEvent</a></li>
            
                <li><a href="..&#x2F;classes/MovieClip.html">MovieClip</a></li>
            
                <li><a href="..&#x2F;classes/MovieClipPlugin.html">MovieClipPlugin</a></li>
            
                <li><a href="..&#x2F;classes/Point.html">Point</a></li>
            
                <li><a href="..&#x2F;classes/Rectangle.html">Rectangle</a></li>
            
                <li><a href="..&#x2F;classes/Shadow.html">Shadow</a></li>
            
                <li><a href="..&#x2F;classes/Shape.html">Shape</a></li>
            
                <li><a href="..&#x2F;classes/Sound.html">Sound</a></li>
            
                <li><a href="..&#x2F;classes/SoundChannel.html">SoundChannel</a></li>
            
                <li><a href="..&#x2F;classes/SoundInstance.html">SoundInstance</a></li>
            
                <li><a href="..&#x2F;classes/SpriteSheet.html">SpriteSheet</a></li>
            
                <li><a href="..&#x2F;classes/SpriteSheetBuilder.html">SpriteSheetBuilder</a></li>
            
                <li><a href="..&#x2F;classes/SpriteSheetUtils.html">SpriteSheetUtils</a></li>
            
                <li><a href="..&#x2F;classes/Stage.html">Stage</a></li>
            
                <li><a href="..&#x2F;classes/TagPool.html">TagPool</a></li>
            
                <li><a href="..&#x2F;classes/Text.html">Text</a></li>
            
                <li><a href="..&#x2F;classes/Ticker.html">Ticker</a></li>
            
                <li><a href="..&#x2F;classes/Timeline.html">Timeline</a></li>
            
                <li><a href="..&#x2F;classes/Touch.html">Touch</a></li>
            
                <li><a href="..&#x2F;classes/Tween.html">Tween</a></li>
            
                <li><a href="..&#x2F;classes/UID.html">UID</a></li>
            
                <li><a href="..&#x2F;classes/WebAudioLoader.html">WebAudioLoader</a></li>
            
                <li><a href="..&#x2F;classes/WebAudioPlugin.html">WebAudioPlugin</a></li>
            
                <li><a href="..&#x2F;classes/xc.class.html">xc.class</a></li>
            
                <li><a href="..&#x2F;classes/xc.module.html">xc.module</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/xc.html">xc</a></li>
            
                <li><a href="..&#x2F;modules/xc.core.html">xc.core</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.html">xc.createjs</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.easeljs.html">xc.createjs.easeljs</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.soundjs.html">xc.createjs.soundjs</a></li>
            
                <li><a href="..&#x2F;modules/xc.createjs.tweenjs.html">xc.createjs.tweenjs</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
            <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <script>
	var name = ..\src\lib\createjs\tweenjs\MotionGuidePlugin.js      
</script>
<h1 class="file-heading">File:..\src\lib\createjs\tweenjs\MotionGuidePlugin.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
xc.module.define(&quot;xc.createjs.MotionGuidePlugin&quot;, function(exports) {

  var Tween = xc.module.require(&quot;xc.createjs.Tween&quot;);

  &#x2F;**
   * A TweenJS plugin for working with motion guides.
   *
   * To use, install the plugin after TweenJS has loaded. Next tween the &#x27;guide&#x27; property with an object as detailed below.
   *
   *     MotionGuidePlugin.install();
   *
   * &lt;h4&gt;Example&lt;&#x2F;h4&gt;
   *
   *     &#x2F;&#x2F; Using a Motion Guide
   *     Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);
   *     &#x2F;&#x2F; Visualizing the line
   *     graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);
   *
   * Each path needs pre-computation to ensure there&#x27;s fast performance. Because of the pre-computation there&#x27;s no
   * built in support for path changes mid tween. These are the Guide Object&#x27;s properties:
   * &lt;ul&gt;
   *  &lt;li&gt; path: Required, Array : The x&#x2F;y points used to draw the path with a moveTo and 1 to n curveTo calls.&lt;&#x2F;li&gt;
   *  &lt;li&gt; start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.&lt;&#x2F;li&gt;
   *  &lt;li&gt; end: Optional, 0-1 : Final position, default 1 if not specified.&lt;&#x2F;li&gt;
   *  &lt;li&gt; orient: Optional, bool : Set the target&#x27;s rotation parallel to the curve at its position.&lt;&#x2F;li&gt;
   * &lt;&#x2F;ul&gt;
   * Guide objects should not be shared between tweens even if all properties are identical, the library stores
   * information on these objects in the background and sharing them can cause unexpected behaviour. Values
   * outside 0-1 range of tweens will be a &quot;best guess&quot; from the appropriate part of the defined curve.
   *
   * @class MotionGuidePlugin
   * @constructor
   *&#x2F;
  var MotionGuidePlugin = function() {
    throw(&quot;MotionGuidePlugin cannot be instantiated.&quot;)
  };

  &#x2F;**
   * @property priority
   * @protected
   * @static
   *&#x2F;
  MotionGuidePlugin.priority = 0; &#x2F;&#x2F; high priority, should run sooner

  &#x2F;**
   * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.
   *
   * @method install
   * @static
   *&#x2F;
  MotionGuidePlugin.install = function() {
    Tween.installPlugin(MotionGuidePlugin, [&quot;guide&quot;, &quot;x&quot;, &quot;y&quot;, &quot;rotation&quot;]);
    return Tween.IGNORE;
  };

  &#x2F;**
   * @method init
   * @protected
   * @static
   *&#x2F;
  MotionGuidePlugin.init = function(tween, prop, value) {
    var target = tween.target;
    if (!target.hasOwnProperty(&quot;x&quot;)) { target.x = 0; }
    if (!target.hasOwnProperty(&quot;y&quot;)) { target.y = 0; }
    if (!target.hasOwnProperty(&quot;rotation&quot;)) { target.rotation = 0; }
    return prop == &quot;guide&quot; ? null : value;
  };

  &#x2F;**
   * @method step
   * @protected
   * @static
   *&#x2F;
  MotionGuidePlugin.step = function(tween, prop, startValue, endValue, injectProps) {
    if (prop != &quot;guide&quot;) { return endValue; }
    var temp, data = endValue;
    if (!data.hasOwnProperty(&quot;path&quot;)) { data.path = []; }
    var path = data.path;
    if (!data.hasOwnProperty(&quot;end&quot;)) { data.end = 1; }
    if (!data.hasOwnProperty(&quot;start&quot;)) {
      data.start = (startValue &amp;&amp; startValue.hasOwnProperty(&quot;end&quot;) &amp;&amp; startValue.path === path) ? startValue.end : 0;
    }
    if (data.hasOwnProperty(&quot;_segments&quot;) &amp;&amp; data._length) { return endValue; }
    var l = path.length;
    var accuracy = 10;		&#x2F;&#x2F; Adjust to improve line following precision but sacrifice performance (# of seg)
    if (l &gt;= 6 &amp;&amp; (l - 2) % 4 == 0) {  &#x2F;&#x2F; Enough points &amp;&amp; contains correct number per entry ignoring start
      data._segments = [];
      data._length = 0;
      for (var i = 2; i &lt; l; i += 4) {
        var sx = path[i - 2], sy = path[i - 1];
        var cx = path[i + 0], cy = path[i + 1];
        var ex = path[i + 2], ey = path[i + 3];
        var oldX = sx, oldY = sy;
        var tempX, tempY, total = 0;
        var sublines = [];
        for (var j = 1; j &lt;= accuracy; j++) {
          var t = j &#x2F; accuracy;
          var inv = 1 - t;
          tempX = inv * inv * sx + 2 * inv * t * cx + t * t * ex;
          tempY = inv * inv * sy + 2 * inv * t * cy + t * t * ey;
          total += sublines[sublines.push(Math.sqrt((temp = tempX - oldX) * temp + (temp = tempY - oldY) * temp)) - 1];
          oldX = tempX;
          oldY = tempY;
        }
        data._segments.push(total);
        data._segments.push(sublines);
        data._length += total;
      }
    } else {
      throw(&quot;invalid &#x27;path&#x27; data, please see documentation for valid paths&quot;);
    }
    temp = data.orient;
    data.orient = false;
    MotionGuidePlugin.calc(data, data.end, injectProps);
    data.orient = temp;
    return endValue;
  };

  &#x2F;**
   * @method tween
   * @protected
   * @static
   *&#x2F;
  MotionGuidePlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {
    var data = endValues.guide;
    if (data == undefined || data === startValues.guide) { return value; }
    if (data.lastRatio != ratio) {
      &#x2F;&#x2F; first time through so calculate what I need to
      var t = ((data.end - data.start) * (wait ? data.end : ratio) + data.start);
      MotionGuidePlugin.calc(data, t, tween.target);
      if (data.orient) { tween.target.rotation += startValues.rotation || 0; }
      data.lastRatio = ratio;
    }
    if (!data.orient &amp;&amp; prop == &quot;rotation&quot;) { return value; }
    return tween.target[prop];
  };

  &#x2F;**
   * Determine the appropriate x&#x2F;y&#x2F;rotation information about a path for a given ratio along the path.
   * Assumes a path object with all optional parameters specified.
   *
   * @param data Data object you would pass to the &quot;guide:&quot; property in a Tween
   * @param ratio 0-1 Distance along path, values outside 0-1 are &quot;best guess&quot;
   * @param target Object to copy the results onto, will use a new object if not supplied.
   * @return {Object} The target object or a new object w&#x2F; the tweened properties
   * @static
   *&#x2F;
  MotionGuidePlugin.calc = function(data, ratio, target) {
    if (data._segments == undefined) { MotionGuidePlugin.validate(data); }
    if (target == undefined) { target = {x: 0, y: 0, rotation: 0}; }
    var seg = data._segments;
    var path = data.path;
    &#x2F;&#x2F; find segment
    var pos = data._length * ratio;
    var cap = seg.length - 2;
    var n = 0;
    while (pos &gt; seg[n] &amp;&amp; n &lt; cap) {
      pos -= seg[n];
      n += 2;
    }
    &#x2F;&#x2F; find subline
    var sublines = seg[n + 1];
    var i = 0;
    cap = sublines.length - 1;
    while (pos &gt; sublines[i] &amp;&amp; i &lt; cap) {
      pos -= sublines[i];
      i++;
    }
    var t = (i &#x2F; ++cap) + (pos &#x2F; (cap * sublines[i]));
    &#x2F;&#x2F; find x&#x2F;y
    n = (n * 2) + 2;
    var inv = 1 - t;
    target.x = inv * inv * path[n - 2] + 2 * inv * t * path[n + 0] + t * t * path[n + 2];
    target.y = inv * inv * path[n - 1] + 2 * inv * t * path[n + 1] + t * t * path[n + 3];
    &#x2F;&#x2F; orientation
    if (data.orient) {
      target.rotation = 57.2957795 * Math.atan2(
          (path[n + 1] - path[n - 1]) * inv + (path[n + 3] - path[n + 1]) * t,
          (path[n + 0] - path[n - 2]) * inv + (path[n + 2] - path[n + 0]) * t);
    }
    return target;
  };

  return  MotionGuidePlugin;

});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>